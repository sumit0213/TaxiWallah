<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Ride</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <h1>Urban Ride</h1>

    <!-- Form container with blue background -->
    <div class="form-container">
        <label for="location1">Current Location:</label>
        <input type="text" id="location1" placeholder="Type location..." autocomplete="off">

        <label for="location2">Enter Second Location:</label>
        <input type="text" id="location2" placeholder="Type location..." autocomplete="off">
    </div>

    <div class="transportation-buttons">
        <button class="transportation-button" onclick="calculatePrice('CAR')" data-type="CAR"><i class="fas fa-car"></i> CAR</button>
        <button class="transportation-button" onclick="calculatePrice('SUV')" data-type="SUV"><i class="fas fa-truck-pickup"></i> SUV</button>
        <button class="transportation-button" onclick="calculatePrice('BIKE')" data-type="BIKE"><i class="fas fa-motorcycle"></i> BIKE</button>
        <button class="transportation-button" onclick="calculatePrice('INTER CITY')" data-type="INTER CITY"><i class="fas fa-bus"></i> INTER CITY</button>
    </div>

    <div class="map-container" id="map"></div>

    <div class="result-container" id="result"></div>
    <div><label for="Distance"></label>
        <label for="Duration"></label>
        <label for="Market Price:"></label> </div>

    <!-- New input field below transportation buttons -->
    <div class="input-container">
        <input type="text" id="expected-fare" placeholder="Enter expected fare..." autocomplete="off">
        <button id="find-driver-button" onclick="checkExpectedFare()">Find Driver</button>
    </div>

    <!-- Include Google Maps API script without the callback parameter -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_OF-GCSb49quE1Jbs9vA7_cotXjQaPpk&libraries=places"></script>

    <!-- Call initializeMap after the API script has loaded -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Function to request location permission
        function requestLocationPermission() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function (position) {
                        // Permission granted, proceed with loading the rest of the page
                        loadPage(position.coords.latitude, position.coords.longitude);
                    },
                    function (error) {
                        // Permission denied or error handling
                        handleGeolocationError(error);
                    }
                );
            } else {
                // Geolocation not supported by the browser
                alert('Error: Your browser doesn\'t support geolocation.');
            }
        }

        // Function to load the rest of the page
        function loadPage(latitude, longitude) {
            // ... Your existing script content ...
            initializeMap(latitude, longitude);
        }

        // Call the function to request location permission
        requestLocationPermission();
    </script>
    <script src="script.js"></script>
    <script src="firebase-config.js"></script>

</body>

</html>
